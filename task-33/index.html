<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		.main {
			position: relative;
			margin: 200px auto;
			width: 400px;
			height: 400px;
			border: 2px solid #333;
		}
		.order {
			position: absolute;
			left: 0;
			bottom: -40px;
		}
		.hori-num {
			position: absolute;
			left: 5px;
			top: -35px;
			font-size: 24px;
		}
		.hori-num span {
			margin-right: 28px;
		}
		.verti-num {
			position: absolute;
			left: -35px;
			top: 5px;
			font-size: 24px;
		}
		.verti-num span {
			display: block;
			text-align: right;
			margin-bottom: 13px;
		}
		.grids {
			position: absolute;
			left: 0;
			top: 0;
			width: 400px;
			height: 400px;
		}
		.grid {
			float: left;
			width: 40px;
			height: 40px;
			box-sizing: border-box;
			border: 1px solid #ccc;
		}
		.square {
			position: absolute;
            left: 0;
            top: 0;
			width: 40px;
			height: 40px;
			background: red;
		}
		.square-front {
			width: 40px;
			height: 10px;
			background: blue;
		}
		.introduction {
			font-size: 12px;
			color: #555;
		}
	</style>
</head>
<body>
            <p class="introduction">
			    GO：向蓝色边所面向的方向前进一格（一格等同于正方形的边长）<br>
				TUN LEF：向左转（逆时针旋转90度）<br>
                TUN RIG：向右转（顺时针旋转90度）<br>
                TUN BAC：向右转（旋转180度）
			</p>
	<div class="wrapper">
		<div class="main">
		<div class="hori-num"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span></div>
		<div class="verti-num"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span></div>
		<div class="grids">
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
			<div class="grid"></div>
		</div>
		    <div class="square">
		    	<div class="square-front"></div>
		    </div>
			<div class="order">
				<form action="#">
                    <input type="text" class="input-area" name="input-area">
					<button class="submitBtn" type="submit">输入指令</button>
				</form>
			</div>

		</div>
		
		

	</div>
	<script>
		var square = document.querySelector('.square');
		var squareFront = square.querySelector('.square-front');
		var inputArea = document.querySelector('.input-area');
		var btn = document.querySelector('.submitBtn');
		var container = document.querySelector('.main');

		btn.addEventListener('click', function(e) {
			var value = inputArea.value.trim().toLowerCase();
			if (value === 'go') {
				MovingSquare.go(square, container);
			} else if (value.substr(0, 3) === 'tun') {
				MovingSquare.turn(value.substr(4));
			}
            e.preventDefault();
		});

		var MovingSquare = (function() {
			var initDeg = 0;
            var turn = function(direction) {
                switch (direction) {
                	case 'lef':
                	    initDeg -= 90;
                	    if (initDeg === -360) {
                	    	initDeg = 0;
                	    }
                	    square.style.setProperty('transform', `rotate(${initDeg}deg)`);
                	    break;
                	case 'rig':
                	    initDeg += 90;
                	    if (initDeg === 360) {
                	    	initDeg = 0;
                	    }
                	    square.style.setProperty('transform', `rotate(${initDeg}deg)`);
                	    break;
                	case 'bac':
                	    initDeg += 180;
                	    if (initDeg === 360) {
                	    	initDeg = 0;
                	    }
                	    square.style.setProperty('transform', `rotate(${initDeg}deg)`);
                	    break;
                }

            };

            var go = function(square, container) {
               var offset;
               var width = square.offsetWidth;
               var border = container.clientWidth - width;
               if (initDeg === 0) {
                   offset = square.offsetTop - width;
                   if (offset < 0) return;
                   square.style.top = offset + 'px';
               } else if (initDeg === 90 || initDeg === -270) {
                   offset = square.offsetLeft + width;
                   if (offset > border) return;
                   square.style.left = offset + 'px';
               } else if (initDeg === -90 || initDeg === 270) {
                   offset = square.offsetLeft - width;
                   if (offset < 0) return;
                   square.style.left = offset + 'px';
               } else { // 180 || -180
                   offset = square.offsetTop + width;
                   if (offset > border) return; 
                   square.style.top = offset + 'px';
               }

            };

            return {
            	turn: turn,
            	go: go
            }
		}());
	</script>
</body>
</html>